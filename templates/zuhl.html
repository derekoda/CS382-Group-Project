{% extends "base.html" %}

{% block content %}
<!-- Image Map Generated by http://www.image-map.net/ -->
<img src="/static/Zuhl_1stfloor.drawio.png" usemap="#image-map">

<map name="image-map">
   
<area data-id="near_exit" alt="" title="" href="javascript:void(0);" shape="rect" coords="714,72,791,128" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="snack" alt="" title="" href="javascript:void(0);" shape="rect" coords="607,112,663,151" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="soda" alt="" title="" href="javascript:void(0);" shape="rect" coords="620,153,659,174" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="energy" alt="" title="" href="javascript:void(0);" shape="rect" coords="618,177,658,201" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="entrance" alt="" title="" href="javascript:void(0);" shape="rect" coords="211,153,275,203" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="checkout" alt="" title="" href="javascript:void(0);" shape="rect" coords="112,230,196,320" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="single_study" alt="" title="" href="javascript:void(0);" shape="rect" coords="466,261,526,317" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="single_study" alt="" title="" href="javascript:void(0);" shape="rect" coords="592,223,652,279" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="single_study" alt="" title="" href="javascript:void(0);" shape="rect" coords="732,211,792,267" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="group_study" alt="" title="" href="javascript:void(0);" shape="rect" coords="964,576,1125,731" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="group_study" alt="" title="" href="javascript:void(0);" shape="rect" coords="1093,754,1254,909" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="group_study" alt="" title="" href="javascript:void(0);" shape="rect" coords="1342,628,1503,783" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="exit" alt="" title="" href="javascript:void(0);" shape="rect" coords="1609,874,1689,951" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />
<area data-id="snackbar" alt="" title="" href="javascript:void(0);" shape="rect" coords="588,787,882,945" style="outline:none;" target="_self" onclick="showPopup(this.dataset.id, this.coords)"    />

  
   
</map>

<div id="area-modal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2 id="area-type"></h2>
        <p id="area-count"></p>
        <script>
            if(window.location.href.indexOf("near_exit") > -1) {
                document.getElementById("area-type").innerHTML = "Near Exit";
                <p>Exit</p>
            }
            if(window.location.href.indexOf("snack") > -1) {
                document.getElementById("area-type").innerHTML = "Snack";
                <p>Snack</p>
            }
            if(window.location.href.indexOf("soda") > -1) {
                <p>Soda</p>
                document.getElementById("area-type").innerHTML = "Soda";
                
            }
            if(window.location.href.indexOf("energy") > -1) {
                document.getElementById("area-type").innerHTML = "Energy";
            }
            if(window.location.href.indexOf("entrance") > -1) {
                document.getElementById("area-type").innerHTML = "Entrance";
            }
            if(window.location.href.indexOf("checkout") > -1) {
                document.getElementById("area-type").innerHTML = "Checkout";
            }
            if(window.location.href.indexOf("single_study") > -1) {
                <p>Single</p>
                document.getElementById("area-type").innerHTML = "Single Study";
            }
            if(window.location.href.indexOf("group_study") > -1) {
                document.getElementById("area-type").innerHTML = "Group Study";
            }
        </script>
        <p>Study Area</p>
    </div>
</div>

<script>
    function showPopup(itemId) {
        const dbId = itemId;
        if (!dbId) {
            console.error('Error: Invalid itemId');
            return;
        }

        fetch(`/my_areas/${dbId}`)
            .then(response => response.json())
            .then(data => {
                console.log('Area fetched:', data);
                const areaType = document.getElementById('area-type');
                const areaCount = document.getElementById('area-count');
                areaType.textContent = data.type;
                areaCount.textContent = `Count: ${data.count}`;
                const modal = document.getElementById('area-modal');
                modal.style.display = 'block';
            })
            .catch(error => {
                console.error('Error fetching area:', error);
            });

        const closeModal = document.getElementsByClassName('close')[0];
        closeModal.onclick = function() {
            const modal = document.getElementById('area-modal');
            modal.style.display = 'none';
        };
    }
</script>
{% endblock %}